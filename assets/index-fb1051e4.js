import{C as a}from"./index-3c7e4a8d.js";import{c as O}from"./index-40af5524.js";import{p as z,a as E,i as _,e as b,j as V,A as D,u as H}from"./use-translate-39e9697c.js";import{m as B,n as P,e as q,u as M,I as R,w as G}from"./index-594801ee.js";import{P as J}from"./index-bf2690fa.js";import{A as U,u as I,N as K,H as Q,e as s,D as A,g as X,s as Y,E as Z,y as W,L as tt,r as L,o as et,a as ot,w as C,B as o,F as nt}from"./vue-libs-cca96e89.js";import{u as st}from"./use-expose-50370a66.js";import"./Cell-4dc9c92e.js";import"./constant-a3e7c845.js";import"./index-3e5dcb68.js";import"./interceptor-771d0e71.js";import"./use-global-z-index-2c1217af.js";import"./use-scope-id-f139dbfe.js";let v=0;function it(e){e?(v||document.body.classList.add("van-toast--unclickable"),v++):v&&(v--,v||document.body.classList.remove("van-toast--unclickable"))}const[lt,T]=E("toast"),at=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],ct={icon:String,show:Boolean,type:B("text"),overlay:Boolean,message:P,iconSize:P,duration:q(2e3),position:B("middle"),teleport:[String,Object],wordBreak:String,className:M,iconPrefix:String,transition:B("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:M,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean},F=U({name:lt,props:ct,emits:["update:show"],setup(e,{emit:t,slots:l}){let d,c=!1;const f=()=>{const i=e.show&&e.forbidClick;c!==i&&(c=i,it(c))},k=i=>t("update:show",i),y=()=>{e.closeOnClick&&k(!1)},g=()=>clearTimeout(d),m=()=>{const{icon:i,type:n,iconSize:r,iconPrefix:x,loadingType:u}=e;if(i||n==="success"||n==="fail")return s(R,{name:i||n,size:r,class:T("icon"),classPrefix:x},null);if(n==="loading")return s("div",null,[X("Loading...")])},h=()=>{const{type:i,message:n}=e;if(l.message)return s("div",{class:T("text")},[l.message()]);if(_(n)&&n!=="")return i==="html"?s("div",{key:0,class:T("text"),innerHTML:String(n)},null):s("div",{class:T("text")},[n])};return I(()=>[e.show,e.forbidClick],f),I(()=>[e.show,e.type,e.message,e.duration],()=>{g(),e.show&&e.duration>0&&(d=setTimeout(()=>{k(!1)},e.duration))}),K(f),Q(f),()=>s(J,A({class:[T([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:y,onClosed:g,"onUpdate:show":k},z(e,at)),{default:()=>[m(),h()]})}});function rt(){const e=Z({show:!1}),t=c=>{e.show=c},l=c=>{b(e,c,{transitionAppear:!0}),t(!0)},d=()=>t(!1);return st({open:l,close:d,toggle:t}),{open:l,close:d,state:e,toggle:t}}function ut(e){const t=Y(e),l=document.createElement("div");return document.body.appendChild(l),{instance:t.mount(l),unmount(){t.unmount(),document.body.removeChild(l)}}}const dt={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let p=[],mt=!1,$=b({},dt);const pt=new Map;function j(e){return D(e)?e:{message:e}}function ft(){const{instance:e,unmount:t}=ut({setup(){const l=W(""),{open:d,state:c,close:f,toggle:k}=rt(),y=()=>{},g=()=>s(F,A(c,{onClosed:y,"onUpdate:show":k}),null);return I(l,m=>{c.message=m}),tt().render=g,{open:d,close:f,message:l}}});return e}function kt(){if(!p.length||mt){const e=ft();p.push(e)}return p[p.length-1]}function w(e={}){if(!V)return{};const t=kt(),l=j(e);return t.open(b({},$,pt.get(l.type||$.type),l)),t}const S=e=>t=>w(b({type:e},j(t))),N=S("loading"),gt=S("success"),Ct=S("fail"),wt=e=>{p.length&&(e?(p.forEach(t=>{t.close()}),p=[]):p[0].close())},yt=G(F),Ut=U({__name:"index",setup(e){const t=H({"zh-CN":{fail:"失败提示",text:"提示内容",text2:"成功文案",text3:"失败文案",text4:i=>`倒计时 ${i} 秒`,title1:"文字提示",title2:"加载提示",title3:"成功/失败提示",success:"成功提示",breakAll:"换行时截断单词",breakWord:"换行时不截断单词",wordBreak:"文字换行方式",customIcon:"自定义图标",customImage:"自定义图片",loadingType:"自定义加载图标",positionTop:"顶部展示",useComponent:"使用 Toast 组件",updateMessage:"动态更新提示",positionBottom:"底部展示",customPosition:"自定义位置"},"en-US":{fail:"Fail",text:"Some messages",text2:"Success",text3:"Fail",text4:i=>`${i} seconds`,title1:"Text",title2:"Loading",title3:"Success/Fail",success:"Success",wordBreak:"Word Break",breakAll:"Break All",breakWord:"Break Word",customIcon:"Custom Icon",customImage:"Custom Image",loadingType:"Loading Type",positionTop:"Top",useComponent:"Use Toast Component",updateMessage:"Update Message",positionBottom:"Bottom",customPosition:"Custom Position"}}),l=i=>{N({forbidClick:!0,message:t("loading")})},d=()=>{w({message:t("positionTop"),position:"top"})},c=()=>{w({message:t("positionBottom"),position:"bottom"})},f=()=>{w({message:t("customIcon"),icon:"like-o"})},k=()=>{w({message:t("customImage"),icon:O("logo.png")})},y=()=>{const i=N({duration:0,forbidClick:!0,message:t("text4",3)});let n=3;const r=setInterval(()=>{n--,n?i.message=t("text4",n):(clearInterval(r),wt())},1e3)},g=i=>{w({message:"This message will contain a incomprehensibilities long word.",wordBreak:i})},m=W(!1),h=O("cat.jpeg");return(i,n)=>{const r=L("demo-block"),x=L("van-image");return et(),ot(nt,null,[s(r,{card:"",title:o(t)("basicUsage")},{default:C(()=>[s(o(a),{"is-link":"",title:o(t)("title1"),onClick:n[0]||(n[0]=u=>o(w)(o(t)("text")))},null,8,["title"]),s(o(a),{"is-link":"",title:o(t)("title2"),onClick:n[1]||(n[1]=u=>l())},null,8,["title"]),s(o(a),{"is-link":"",title:o(t)("success"),onClick:n[2]||(n[2]=u=>o(gt)(o(t)("text2")))},null,8,["title"]),s(o(a),{"is-link":"",title:o(t)("fail"),onClick:n[3]||(n[3]=u=>o(Ct)(o(t)("text3")))},null,8,["title"])]),_:1},8,["title"]),s(r,{card:"",title:o(t)("customIcon")},{default:C(()=>[s(o(a),{"is-link":"",title:o(t)("customIcon"),onClick:f},null,8,["title"]),s(o(a),{"is-link":"",title:o(t)("customImage"),onClick:k},null,8,["title"]),s(o(a),{"is-link":"",title:o(t)("loadingType"),onClick:n[4]||(n[4]=u=>l("spinner"))},null,8,["title"])]),_:1},8,["title"]),s(r,{card:"",title:o(t)("customPosition")},{default:C(()=>[s(o(a),{"is-link":"",title:o(t)("positionTop"),onClick:d},null,8,["title"]),s(o(a),{"is-link":"",title:o(t)("positionBottom"),onClick:c},null,8,["title"])]),_:1},8,["title"]),s(r,{card:"",title:o(t)("wordBreak")},{default:C(()=>[s(o(a),{"is-link":"",title:o(t)("breakAll"),onClick:n[5]||(n[5]=u=>g("break-all"))},null,8,["title"]),s(o(a),{"is-link":"",title:o(t)("breakWord"),onClick:n[6]||(n[6]=u=>g("break-word"))},null,8,["title"])]),_:1},8,["title"]),s(r,{card:"",title:o(t)("updateMessage")},{default:C(()=>[s(o(a),{"is-link":"",title:o(t)("updateMessage"),onClick:y},null,8,["title"])]),_:1},8,["title"]),s(r,{card:"",title:o(t)("useComponent")},{default:C(()=>[s(o(a),{"is-link":"",title:o(t)("useComponent"),onClick:n[7]||(n[7]=u=>m.value=!0)},null,8,["title"]),s(o(yt),{show:m.value,"onUpdate:show":n[8]||(n[8]=u=>m.value=u),style:{padding:"0"}},{message:C(()=>[s(x,{src:o(h),width:"200",height:"140",style:{display:"block"}},null,8,["src"])]),_:1},8,["show"])]),_:1},8,["title"])],64)}}});export{Ut as default};
